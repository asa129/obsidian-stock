addiless-alcohol-appå†…ã«è‡ªå‹•ç™»éŒ²ãƒãƒƒãƒç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã¤ãã‚‹
./batch/autoInsertData.ts
ã‚³ãƒãƒ³ãƒ‰å©ã„ã¦å‹•ãã‹ç¢ºèªã€€
```
npx tsx ./batch/autoInsertData.ts
```


ï¼ˆmakeãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã‹ï¼‰

claude apiã‚’ä½¿ã£ã¦æŒ‡ç¤ºã‚’ã ã™
â‡’ğŸ’°ã‹ã‹ã‚‹ã‹ã‚‰ã¡ã‚‡ã£ã¨ã‚€ã‚Šã‹ã‚‚ã€€5$ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã ã‘è²·ã£ã¦ã¿ãŸ



ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚ã†ã‚ˆã†ã«æƒ…å ±ã‚’ã¾ã¨ã‚ã¦ã‚‚ã‚‰ã£ã¦ç™»éŒ²ã™ã‚‹

supabase-jsãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ç™»éŒ²

or

jsonå½¢å¼ã§ç™»éŒ²ã§ããã†

Supabase REST API

ãƒãƒƒãƒã§å©ã

GitHubActionsã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ã¤ãã‚‹

ã‚¯ãƒ¼ãƒ­ãƒ³ã§å®Ÿè¡Œ

```
typescriptã§ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚ŠãŸã„ã§ã™ã€‚

å®Ÿç¾å¯èƒ½ã‹ä¸€ç·’ã«è€ƒãˆã¦ã»ã—ã„ã§ã™ã€‚

è©³ç´°ãƒ†ãƒ¼ãƒ–ãƒ«ã®ç™»éŒ²å†…å®¹ã¯Claude APIã‚’ä½¿ã£ã¦ã€ä»¥ä¸‹ã®URLã‹ã‚‰æƒ…å ±ã‚’åé›†

https://products.suntory.co.jp/beer/ingredient.html

https://products.suntory.co.jp/rtd/ingredient.html

https://www.asahibeer.co.jp/products/ing_beer.html

https://products.kirin.co.jp/alcohol/nutrition/rtd/

https://www.sapporobeer.jp/product/nutrition/

ãã‚Œã‚’å…ƒã«Supabaseã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã«æƒ…å ±ã‚’ç™»éŒ²

å¤–éƒ¨ã‚­ãƒ¼ãªã©ã‚‚ã‚ã‚‹ã®ã§è€ƒæ…®ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“

å„ãƒ†ãƒ¼ãƒ–ãƒ«ã®æƒ…å ±ã¯ä¸‹è¨˜ã«ãªã‚Šã¾ã™

ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«

create table public.alcohols ( id bigserial not null, sake_name text not null, sake_name_kana text null, genre_id bigint not null, manufacturer_id bigint not null, image_url text null, description text null, ingredients_text text null, has_additives boolean null default false, is_active boolean null default true, created_at timestamp with time zone null default now(), updated_at timestamp with time zone null default now(), additives_text text null, alcohol_percentage double precision null, calories bigint null, carbohydrates text null, details_id bigint null, constraint alcohols_pkey primary key (id), constraint alcohols_details_id_fkey foreign KEY (details_id) references alcohol_details (id), constraint alcohols_genre_id_fkey foreign KEY (genre_id) references alcohol_genres (id), constraint alcohols_manufacturer_id_fkey foreign KEY (manufacturer_id) references manufacturers (id) ) TABLESPACE pg_default;

ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«è©³ç´°ãƒ†ãƒ¼ãƒ–ãƒ«

create table public.alcohol_details ( id bigint generated by default as identity not null, created_at timestamp with time zone not null default now(), updated_at timestamp with time zone null, drinking_methods text null, cocktail_recipes text null, recommended_snacks text null, constraint alcohol_details_pkey primary key (id) ) TABLESPACE pg_default;

ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆã“ã‚Œã¯å‚è€ƒã¾ã§ã«ï¼‰

create table public.manufacturers ( id bigserial not null, manufacturer_name text not null, manufacturer_name_kana text null, website_url text null, created_at timestamp with time zone null default now(), updated_at timestamp with time zone null default now(), constraint manufacturers_pkey primary key (id) ) TABLESPACE pg_default;

ã‚¸ãƒ£ãƒ³ãƒ«ãƒ†ãƒ¼ãƒ–ãƒ«

create table public.alcohol_genres ( id bigserial not null, genre_name text not null, genre_name_kana text null, description text null, created_at timestamp with time zone null default now(), updated_at timestamp with time zone null default now(), constraint sake_genres_pkey primary key (id), constraint sake_genres_genre_name_key unique (genre_name) ) TABLESPACE pg_default;

Supabaseã¸ã®ç™»éŒ²ã¯supabase-jsãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã„ã„ãªã¨è€ƒãˆã¦ã„ã¾ã™ãŒã€

é›£ã—ã‘ã‚Œã°ã€Supabase REST APIã‚’ä½¿ã†ã“ã¨ã‚‚æ¤œè¨ã—ã¦ã„ã¾ã™

ã¾ã ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ä½œæˆã—ãªãã¦ã„ã„ã§ã™ã€‚

ã©ã®ã‚ˆã†ãªæµã‚Œã§æƒ…å ±åé›†ã§ãã‚‹ã‹ã€ãã—ã¦ç™»éŒ²ã§ãã‚‹ã‹ã‚ãªãŸã®ãƒ—ãƒ­ä¸¦ã¿ã®æƒ…å ±èƒ½åŠ›ã‚’å…ƒã«æ•™ãˆã¦ãã ã•ã„ã€‚

ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«ã¯Claude APIæ¥ç¶šã¾ã§ã¯å®Ÿè£…ã—ã¾ã—ãŸã€‚

import { anthropic } from "./anthropic"; const msg = await anthropic.messages.create({ model: "claude-opus-4-20250514", max_tokens: 1024, messages: [{ role: "user", content: "Hello, Claude" }], }); console.log(msg);
```

https://playwright.dev/

## 1. æƒ…å ±åé›†ãƒ•ã‚§ãƒ¼ã‚º

### ç”»åƒå–å¾—ã®æ–¹æ³•

- **Puppeteer**ã‚’ä½¿ç”¨ã—ã¦ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ã§å„ã‚µã‚¤ãƒˆã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°
- å•†å“ç”»åƒã®URLã‚’å–å¾—ã—ã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- Supabase Storageã«ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰â†’å…¬é–‹URLã‚’å–å¾—

### ãƒ‡ãƒ¼ã‚¿åé›†ã®æµã‚Œ

1. å„ãƒ¡ãƒ¼ã‚«ãƒ¼ã‚µã‚¤ãƒˆã‹ã‚‰æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ãŸæƒ…å ±ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã«æ•´ç†
2. ã¾ãŸã¯ã€Puppeteerã§HTMLæ§‹é€ ã‚’è§£æã—ã¦è‡ªå‹•å–å¾—


## 2. ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ•ã‚§ãƒ¼ã‚º

```
åé›†ãƒ‡ãƒ¼ã‚¿ â†’ Claude API â†’ è©³ç´°æƒ…å ±ç”Ÿæˆ â†’ Supabaseç™»éŒ²
```

### å‡¦ç†ã®é †åºï¼ˆå¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã‚’è€ƒæ…®ï¼‰

1. **manufacturers**ãƒ†ãƒ¼ãƒ–ãƒ«ã®ç¢ºèª/ç™»éŒ²
2. **alcohol_genres**ãƒ†ãƒ¼ãƒ–ãƒ«ã®ç¢ºèª/ç™»éŒ²
3. **alcohol_details**ãƒ†ãƒ¼ãƒ–ãƒ«ã«ç©ºãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ
4. Claude APIã§è©³ç´°æƒ…å ±ç”Ÿæˆ
5. **alcohol_details**ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–°
6. **alcohols**ãƒ†ãƒ¼ãƒ–ãƒ«ã«ç™»éŒ²